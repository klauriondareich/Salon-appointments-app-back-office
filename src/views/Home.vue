<template>
  <div class="main-content">
      <div class="responsive-header">
          <div class="logo-area">
              <ul class="notify-area">
                  <li>
                      <div class="nav-icon3"> <span></span> <span></span> <span></span> <span></span> </div>
                  </li>
                  <li class="notifications"><a href="#" title=""><i class="fa fa-bell-o"></i></a><span class="red-bg">02</span>
                      <div class="drop notify"> <span class="drop-head">Notifications</span>
                          <ul class="drop-meta">
                              <li> <i class="notifi-icon blue">N</i>
                                  <div class="notifi-meta">
                                      <h4><a href="#" title="">Nulla Vel Metus Scelerisque Ante Commodo. </a></h4>
                                      <span>02:34PM</span> </div>
                              </li>
                              <li> <i class="notifi-icon red">C</i>
                                  <div class="notifi-meta">
                                      <h4><a href="#" title="">Nulla Vel Metus Scelerisque Ante Commodo. </a></h4>
                                      <span>02:34PM</span> </div>
                              </li>
                              <li> <i class="notifi-icon yellow">A</i>
                                  <div class="notifi-meta">
                                      <h4><a href="#" title="">Nulla Vel Metus Scelerisque Ante Commodo. </a></h4>
                                      <span>02:34PM</span> </div>
                              </li>
                              <li> <i class="notifi-icon blue">N</i>
                                  <div class="notifi-meta">
                                      <h4><a href="#" title="">Nulla Vel Metus Scelerisque Ante Commodo. </a></h4>
                                      <span>02:34PM</span> </div>
                              </li>
                          </ul>
                          <span class="drop-bottom"><a href="#" title="">View More Notifications</a></span> </div>
                  </li>
                  <li class="messages"><a href="#" title=""><i class="fa fa-envelope-o"></i></a><span class="blue-bg">10</span>
                      <div class="drop messages"> <span class="drop-head">3 New Message <i class="fa fa-pencil-square-o"></i></span>
                          <ul class="drop-meta">
                              <li> <i class="notifi-icon"><img src="images/resources/user-mesg.jpg" alt=""></i>
                                  <div class="notifi-meta"> <span>02:34PM</span>
                                      <h4><a href="#" title="">Hi Teddy, Just wanted to let you...</a></h4>
                                  </div>
                              </li>
                              <li> <i class="notifi-icon"><img src="images/resources/user-mesg2.jpg" alt=""></i>
                                  <div class="notifi-meta"> <span>02:34PM</span>
                                      <h4><a href="#" title="">Hi Teddy, Just wanted to let you...</a></h4>
                                  </div>
                              </li>
                              <li> <i class="notifi-icon"><img src="images/resources/user-mesg3.jpg" alt=""></i>
                                  <div class="notifi-meta"> <span>02:34PM</span>
                                      <h4><a href="#" title="">Hi Teddy, Just wanted to let you...</a></h4>
                                  </div>
                              </li>
                              <li> <i class="notifi-icon"><img src="images/resources/user-mesg.jpg" alt=""></i>
                                  <div class="notifi-meta"> <span>02:34PM</span>
                                      <h4><a href="#" title="">Hi Teddy, Just wanted to let you...</a></h4>
                                  </div>
                              </li>
                              <li> <i class="notifi-icon"><img src="images/resources/user-mesg2.jpg" alt=""></i>
                                  <div class="notifi-meta"> <span>02:34PM</span>
                                      <h4><a href="#" title="">Hi Teddy, Just wanted to let you...</a></h4>
                                  </div>
                              </li>
                          </ul>
                          <span class="drop-bottom"><a href="#" title="">View More messages</a></span> </div>
                  </li>
              </ul>
              
              <div class="user-head">
              <div class="admin">
                  <div class="admin-avatar"> <img src="images/resources/admin.png" alt=""> <i class="online"></i> </div>
              </div>
              <div class="drop setting"> <span class="drop-head">stifen Doe <i>30 days trial</i></span>
                  <ul class="drop-meta">
                      <li> <a href="#" title=""><i class="fa fa-eyedropper"></i>Edit Profile</a> </li>
                      <li> <a href="#" title=""><i class="fa fa-envelope-o"></i>My Inbox</a> </li>
                      <li> <a href="#" title=""><i class="fa fa-adjust"></i>task</a> </li>
                      <li> <a href="#" title=""><i class="fa fa-calendar"></i>Calender</a> </li>
                      <li> <a href="#" title=""><i class="fa fa-align-right"></i>Balance Report</a> </li>
                  </ul>
                  <span class="drop-bottom"><a href="#" title=""><i class="fa fa-sign-out"></i>log Out</a></span> </div>
              </div>
              <ul class="seting-area">
              <li class="langages">
                  <a title="" href="#">Eng</a>
                  <ul class="drop language">
                      <li class="lang-selected"><a href="#"><i class="fa fa-check"></i> Eng</a></li>
                      <li><a href="#">Rus</a></li>
                      <li><a href="#">Jap</a></li>
                      <li><a href="#">Arb</a></li>
                  </ul>
              </li>
              <li class="setting-panel"><a title="" href="#"><i class="icon-equalizer"></i></a></li>
          </ul>
          </div>
          <div class="t-search">
              <form method="post">
                  <input type="text" placeholder="Enter Your Keyword">
                  <button type="submit"><i class="fa fa-search"></i></button>
              </form>
          </div>
      </div>
      <!-- responsive header -->
      <div class="panel-body">
          <div class="content-area">
              <div class="sub-bar">
                  <div class="sub-title">
                      <h4>Salon Manager Dashboard:</h4>
                      <span>Bienvenue Laurion Dareich</span>
                  </div>
                  <ul class="bread-crumb">
                      <li><a href="#" title=""><i class="fa fa-home"></i></a></li>
                      <li>Dashbord</li>
                  </ul>
              </div>
              <div class="row">
                  <div class="col-lg-3 col-md-6 col-sm-12">
                  <div class="top-widget">
                    <i class="fa fa-dollar"></i>
                    <div class="informative">
                      <span>90000 FCFA</span>
                      <em>Chiffre d'affaire du jour</em>
                    </div>
                  </div>
                  </div>
                  <div class="col-lg-3 col-md-6 col-sm-12">
                  <div class="top-widget">
                    <i class="fa fa-calendar"></i>
                    <div class="informative">
                      <span>236</span>
                      <em>Rendez-vous du jour</em>
                    </div>
                  </div>
                  </div>
                  <div class="col-lg-3 col-md-6 col-sm-12">
                  <div class="top-widget">
                    <i class="fa fa-trophy"></i>
                    <div class="informative">
                      <span>100</span>
                      <em>Rendez-vous terminés</em>
                    </div>
                  </div>
                  </div>
                  <div class="col-lg-3 col-md-6 col-sm-12">
                  <div class="top-widget">
                    <i class="fa fa-clock-o"></i>
                    <div class="informative">
                      <span>136</span>
                      <em>Rendez-vous restants</em>
                    </div>
                  </div>
                  </div>
              </div>

                <div class="row p-5">
                     <vc-calendar
                        class="custom-calendar max-w-full"
                        :masks="masks"
                        :attributes="attributes"
                        disable-page-swipe
                        is-expanded
                        >
                    </vc-calendar>
                </div>
              <div class="col-lg-12">
                  <div class="row merged pt-5">
                      <div class="col-lg-7 col-sm-8">
                          <div class="widget">
                              <div class="clndr-wdgt">
                                  <div class="clndr">
                                      <div class="clndr"></div>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <!-- calander -->
                      <div class="col-lg-5 col-sm-4">
                          <div class="events">
                              <div class="event-head">
                                  <h5>event calender</h5>
                              </div>
                              <ul class="event-detail">
                                  <li> <span>12 February 2019</span>
                                      <h6><a href="#" title="">News & Fitness Advice</a></h6>
                                      <p>Completed Layout Examples</p>
                                  </li>
                                  <li> <span>16 February 2019</span>
                                      <h6><a href="#" title="">Some quick example</a></h6>
                                      <p>Completed Layout Examples</p>
                                  </li>
                                  <li> <span>21 February 2019</span>
                                      <h6><a href="#" title="">bulk card's content</a></h6>
                                      <p>Completed Layout Examples</p>
                                  </li>
                              </ul>
                          </div>
                      </div>
                      <!-- calander event -->
                  </div>
              </div>	
        

              <div class="widget mt-5">
                  <div class="widget-title no-margin">
                      <h4>Liste des Rendez-vous du jour</h4>
                      <ul class="widget-controls">
                          <li class="refresh-content" title="Refresh"><i class="fa fa-refresh"></i></li>
                          <li class="expand-content" title="Maximize"><i class="icon-frame"></i></li>
                          <li class="more-option" title="More Options"><i class="ti-more-alt"></i></li>
                      </ul>
                      <div class="more-optn">
                          <ul>
                              <li><a href="#" title="">option 1</a></li>
                              <li><a href="#" title="">option 2</a></li>
                              <li><a href="#" title="">option 3</a></li>
                          </ul>
                      </div>
                  </div>
                  <div class="main-table">
                      <table class="table table-hover table-responsive">
                          <thead>
                              <tr>
                                  <th>NO.</th>
                                  <th>Service</th>
                                  <th>Spécilaiste</th>
                                  <th>Client</th>
                                  <th>Status</th>
                                  <!-- <th>Project Team</th> -->
                              </tr>
                          </thead>
                          <tbody>
                              <tr v-for="(item, index) in appointments" :key="index">
                                  <td><span class="sr">{{++index}}</span></td>
                                  <td>
                                      <div class="project-title">
                                          <h5>{{item.work_name}}</h5>
                                          <!-- <a href="#" title="">delete</a> <a href="#" title="">edit</a>--> </div> 
                                  </td>
                                  <td>
                                      <div class="owner-pic "> 
                                        <img :src="item.employee_url" alt="" width="50" height="100" style="border-radius: 30px"> 
                                      </div>
                                      <div class="owner-info">
                                          <h6>{{item.customer_name}} </h6>
                                          <span>{{item.time_start}} - {{item.time_end}}</span> </div>
                                  </td>
                                  <td><span class="progres">{{item.employee_name}}</span></td>
                                  <td>
                                    <span v-if="item.status =='complete'" class="priority low">Terminé</span>
                                    <span v-if="item.status =='create'" class="priority medium">En attente</span>
                                  </td>
                                  <!-- <td>
                                      <div class="prj-team">
                                          <span title="Jhon Doe"><img src="images/resources/activity-1.jpg" alt=""></span>
                                          <span title="Sarah"><img src="images/resources/activity-2.jpg" alt=""></span>
                                          <span title="Daniel"><img src="images/resources/activity-3.jpg" alt=""></span>
                                          <span title="Wraber"><img src="images/resources/activity-4.jpg" alt=""></span>
                                      </div>
                                  </td> -->
                              </tr>
                             
                          </tbody>
                      </table>
                  </div>
              </div>

              <div class="row pt-5">
                  <div class="col-lg-8 col-sm-6">
                      <div class="widget">
                          <div class="widget-title">
                              <h4>Commentaires récents</h4>
                              <ul class="widget-controls">
                          <li title="Refresh" class="refresh-content"><i class="fa fa-refresh"></i></li>
                          <li title="Maximize" class="expand-content"><i class="icon-frame"></i></li>
                          <li title="More Options" class="more-option"><i class="ti-more-alt"></i></li>
                      </ul>
                          </div>
                          <div class="widget-peding">
                              <ul class="q-comments recent">
                                  <li>
                                      <div class="comenter"> <img src="images/resources/q-comment1.jpg" alt=""> </div>
                                      <div class="comment-detail">
                                          <h5>Michael Baker</h5>
                                          <p>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus sc risque ante sollicitudin commodo. </p>
                                      </div>
                                      <ul class="comment-date">
                                          <li><span>October 21, 2019</span></li>
                                      </ul>
                                      <a class="approved" href="#" title="">Afficher</a>
                                      <ul class="control">
                                          <li><a href="#" title=""><i class="icon-pencil"></i></a></li>
                                          <li><a href="#" title=""><i class="icon-pin"></i></a></li>
                                          <li><a class="close-content" href="#" title=""><i class="icon-trash"></i></a></li>
                                      </ul>
                                  </li>
                                  <li>
                                      <div class="comenter"> <img src="images/resources/q-comment3.jpg" alt=""> </div>
                                      <div class="comment-detail">
                                          <h5>Sarah Loren</h5>
                                          <p>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus sc risque ante sollicitudin commodo. </p>
                                      </div>
                                      <ul class="comment-date">
                                          <li><span>December 21, 2019</span></li>
                                      </ul>
                                      <a class="approved" href="#" title="">Afficher</a>
                                      <ul class="control">
                                          <li><a href="#" title=""><i class="icon-pencil"></i></a></li>
                                          <li><a href="#" title=""><i class="icon-pin"></i></a></li>
                                          <li><a class="close-content" href="#" title=""><i class="icon-trash"></i></a></li>
                                      </ul>
                                  </li>
                                  <li>
                                      <div class="comenter"> <img src="images/resources/q-comment2.jpg" alt=""> </div>
                                      <div class="comment-detail">
                                          <h5>Michael Baker</h5>
                                          <p>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus sc risque ante sollicitudin commodo. </p>
                                      </div>
                                      <ul class="comment-date">
                                          <li><span>September 10, 2019</span></li>
                                      </ul>
                                      <a class="approved" href="#" title="">Afficher</a>
                                      <ul class="control">
                                          <li><a href="#" title=""><i class="icon-pencil"></i></a></li>
                                          <li><a href="#" title=""><i class="icon-pin"></i></a></li>
                                          <li><a class="close-content" href="#" title=""><i class="icon-trash"></i></a></li>
                                      </ul>
                                  </li>
                              </ul>
                          </div>
                      </div>
                      <!-- user list -->
                  </div>
                  <!-- recent comment widget -->
                    <div class="col-lg-4 col-sm-6">
                      <div class="widget">
                          <div class="widget-title">
                              <h4>Rendez-vous mensuels</h4>
                              <ul class="widget-controls">
                          <li title="Refresh" class="refresh-content"><i class="fa fa-refresh"></i></li>
                          <li title="Maximize" class="expand-content"><i class="icon-frame"></i></li>
                          <li title="More Options" class="more-option"><i class="ti-more-alt"></i></li>
                      </ul>
                          </div>
                          <div class="donut-chart">
                              <ul class="total">
                                  <li>Google Plus<span>25A</span></li>
                                  <li>Direct Access<span>1034</span></li>
                              </ul>
                              <canvas id="canvasDoughnut"></canvas>
                              <ul class="total">
                                  <li>Facebook<span>779</span></li>
                                  <li>Twitter<span>489</span></li>
                              </ul>
                          </div>
                      </div>
                      <!-- guage widget -->
                  </div>

                  
              </div>                            
          </div>
      </div>
  </div>
</template>

<script>
// @ is an alias to /src
import firebase from '../firebase/init'

export default {
  name: 'Home',
  data(){
    const month = new Date().getMonth();
    const year = new Date().getFullYear();
    return{
       appointments: [],
       appointment: firebase.firestore().collection("appointment"),
      masks: {
        weekdays: 'WWW',
      },
      attributes: [
        {
          key: 1,
          customData: {
            title: 'Lunch with mom.',
            class: 'bg-red-600 text-white',
          },
          dates: new Date(year, month, 1),
        },
        {
          key: 2,
          customData: {
            title: 'Take Noah to basketball practice',
            class: 'bg-blue-500 text-white',
          },
          dates: new Date(year, month, 2),
        },
        {
          key: 3,
          customData: {
            title: "Noah's basketball game.",
            class: 'bg-blue-500 text-white',
          },
          dates: new Date(year, month, 5),
        },
        {
          key: 4,
          customData: {
            title: 'Take car to the shop',
            class: 'bg-indigo-500 text-white',
          },
          dates: new Date(year, month, 5),
        },
        {
          key: 4,
          customData: {
            title: 'Meeting with new client.',
            class: 'bg-teal-500 text-white',
          },
          dates: new Date(year, month, 7),
        },
        {
          key: 5,
          customData: {
            title: "Mia's gymnastics practice.",
            class: 'bg-pink-500 text-white',
          },
          dates: new Date(year, month, 11),
        },
        {
          key: 6,
          customData: {
            title: 'Cookout with friends.',
            class: 'bg-orange-500 text-white',
          },
          dates: { months: 5, ordinalWeekdays: { 2: 1 } },
        },
        {
          key: 7,
          customData: {
            title: "Mia's gymnastics recital.",
            class: 'bg-pink-500 text-white',
          },
          dates: new Date(year, month, 22),
        },
        {
          key: 8,
          customData: {
            title: 'Visit great grandma.',
            class: 'bg-red-600 text-white',
          },
          dates: new Date(year, month, 25),
        },
      ],
    }
   
  },
  created(){

     this.appointment.where("salon", "==", "XMLjEcqdOURe2Vwadm7V").orderBy("stamp", "desc").onSnapshot((snapshot) =>{
      if(!snapshot.empty){
        this.appointments = [];
        snapshot.forEach((doc) =>{
          console.log(doc.data())
          let obj = doc.data();
          obj.id = doc.id;
          this.appointments.push(obj)
        })
      }

      else console.log("not data now")
    });
  }
}
</script>

<style lang="postcss" scoped>
::-webkit-scrollbar {
  width: 0px;
}
::-webkit-scrollbar-track {
  display: none;
}
/deep/ .custom-calendar.vc-container {
  --day-border: 1px solid #b8c2cc;
  --day-border-highlight: 1px solid #b8c2cc;
  --day-width: 90px;
  --day-height: 90px;
  --weekday-bg: #f8fafc;
  --weekday-border: 1px solid #eaeaea;
  border-radius: 0;
  width: 100%;
  & .vc-header {
    background-color: #f1f5f8;
    padding: 10px 0;
  }
  & .vc-weeks {
    padding: 0;
  }
  & .vc-weekday {
    background-color: var(--weekday-bg);
    border-bottom: var(--weekday-border);
    border-top: var(--weekday-border);
    padding: 5px 0;
  }
  & .vc-day {
    padding: 0 5px 3px 5px;
    text-align: left;
    height: var(--day-height);
    min-width: var(--day-width);
    background-color: white;
    &.weekday-1,
    &.weekday-7 {
      background-color: #eff8ff;
    }
    &:not(.on-bottom) {
      border-bottom: var(--day-border);
      &.weekday-1 {
        border-bottom: var(--day-border-highlight);
      }
    }
    &:not(.on-right) {
      border-right: var(--day-border);
    }
  }
  & .vc-day-dots {
    margin-bottom: 5px;
  }
}
</style>